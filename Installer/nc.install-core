#!/bin/bash

# Ziel-Datei fÃ¼r Vara
VARA_TARGET="/Pylovara/System/Shell/Vara/nc.vara"

# PrÃ¼fen ob nc bereits existiert
if [[ -f "$VARA_TARGET" ]]; then
    echo "âœ… nc.vara ist bereits installiert."
    exit 0
fi

# OS erkennen
detect_os() {
    if [[ -f "/etc/arch-release" ]]; then
        echo "arch"
    elif [[ -f "/etc/debian_version" ]]; then
        echo "debian"
    elif command -v brew >/dev/null 2>&1; then
        echo "macos"
    else
        echo "unknown"
    fi
}

OS=$(detect_os)

# Installation je nach System
case $OS in
    "arch")
        echo "ğŸ”„ Installiere Netcat (Arch Linux)"
        sudo pacman -Sy --noconfirm netcat
        which nc | xargs cp -v
        cp $(which nc) "$VARA_TARGET"
        ;;
    "debian")
        echo "ğŸ”„ Installiere Netcat (Debian/Ubuntu)"
        sudo apt update && sudo apt install -y netcat
        cp $(which nc) "$VARA_TARGET"
        ;;
    "macos")
        echo "ğŸ”„ Installiere Netcat (macOS via Homebrew)"
        brew install netcat
        cp $(which nc) "$VARA_TARGET"
        ;;
    *)
        echo "âŒ Kein unterstÃ¼tztes System erkannt. Bitte manuell installieren."
        exit 1
        ;;
esac

# Rechte setzen
chmod +x "$VARA_TARGET"

echo "ğŸ‰ nc.vara wurde erfolgreich installiert!"
echo "ğŸ‘‰ Verwende ab jetzt: nc.vara statt nc"
