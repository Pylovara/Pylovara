√úbersicht der x86-64-Register

Die x86-64-Architektur verf√ºgt √ºber 16 allgemeine 64-Bit-Register:

    RAX: Akkumulator f√ºr arithmetische Operationen und R√ºckgabewerte von Funktionen.
    RBX: Basisregister, oft f√ºr Datenzugriffe verwendet.
    RCX: Z√§hlerregister, h√§ufig f√ºr Schleifen und Funktionsaufrufe genutzt.
    RDX: Datenregister, dient oft als zweites Argument oder f√ºr Multiplikation/Division.
    RSI: Quellindex f√ºr Datenkopien.
    RDI: Zielindex f√ºr Datenkopien.
    RBP: Basiszeiger f√ºr den aktuellen Stack-Frame.
    RSP: Stackzeiger, zeigt auf die Spitze des Stacks.
    R8‚ÄìR15: Zus√§tzliche allgemeine Register.
    Brown University Computer Science

Aufrufkonventionen (Calling Conventions)
System V AMD64 ABI (Linux, macOS, BSD)

Diese Konvention wird in Unix-√§hnlichen Systemen verwendet:

    Argumente: Die ersten sechs Ganzzahl- oder Zeigerargumente werden in den Registern %rdi, %rsi, %rdx, %rcx, %r8 und %r9 √ºbergeben. Weitere Argumente werden auf den Stack gelegt.

    R√ºckgabewerte: Ergebnisse werden in %rax zur√ºckgegeben.

    Callee-saved (nicht-volatile) Register: %rbx, %rbp, %r12‚Äì%r15 m√ºssen vom aufgerufenen Funktion gesichert und wiederhergestellt werden.

    Caller-saved (volatile) Register: %rax, %rcx, %rdx, %rsi, %rdi, %r8‚Äì%r11 k√∂nnen vom aufgerufenen Funktion √ºberschrieben werden.
    6.s081.scripts.mit.edu+5cs61.seas.harvard.edu+5Brown University Computer Science+5
    Brown University Computer Science+1cs61.seas.harvard.edu+1

Microsoft x64 Calling Convention (Windows)

Diese Konvention wird in Windows-Systemen verwendet:

    Argumente: Die ersten vier Ganzzahl- oder Zeigerargumente werden in den Registern RCX, RDX, R8 und R9 √ºbergeben. Weitere Argumente werden auf den Stack gelegt.

    R√ºckgabewerte: Ergebnisse werden in RAX zur√ºckgegeben.

    Callee-saved (nicht-volatile) Register: RBX, RBP, RDI, RSI, R12‚ÄìR15 m√ºssen vom aufgerufenen Funktion gesichert und wiederhergestellt werden.

    Caller-saved (volatile) Register: RAX, RCX, RDX, R8‚ÄìR11 k√∂nnen vom aufgerufenen Funktion √ºberschrieben werden.
    Brown University Computer Science+3Microsoft Learn+3ired.team+3
    Microsoft Learn+2Reddit+2Wikipedia+2
    Stack Overflow+1Wikipedia+1

üîß Systemaufrufe (Syscalls) unter Linux

Bei direkten Systemaufrufen unter Linux werden die Argumente wie folgt in Registern √ºbergeben:

    Argumente: RDI, RSI, RDX, R10, R8, R9

    Systemaufrufnummer: RAX

    R√ºckgabewert: RAX
    ired.team+2Reddit+2Wikipedia+2
    Microsoft Learn+1aaronbloomfield.github.io+1

Beachte, dass RCX und R11 durch den Systemaufruf zerst√∂rt werden k√∂nnen.




Ein Betriebssystem braucht:

    Zustandsverwaltung (Prozesse, Threads ‚Üí Stackframes, PCB etc.)

    Speicherverwaltung (Paging, MMU, virtuelle Adressen)

    I/O-Steuerung (√ºber Interrupts, Ports, MMIO)

    Dateisystemlogik

    Scheduler + Kernel-Trap-Handler

    Kontextwechsel (‚Üí genau hier werden Register gespeichert/restauriert!)

Zus√§tzliche Register (nicht "allgemein")

Neben den 16 GPRs gibt es noch viele weitere, aber spezialisierte Register:
Kategorie	Beispiele
Segmentregister	CS, DS, ES, FS, GS, SS
Control Registers	CR0, CR2, CR3, CR4
Flags Register	RFLAGS
Instruction Pointer	RIP
Debugregister	DR0‚ÄìDR7
Model-Specific Regs	IA32_* (z.‚ÄØB. IA32_SYSENTER_EIP)
FPU/MMX/XMM/YMM	XMM0‚ÄìXMM15, YMM0‚ÄìYMM15
Diese dienen der Architektursteuerung, FPU, SIMD, Exceptions, Paging usw.

Klarstellung:
Begriff	Was es ist	Wof√ºr es da ist
Register (z.‚ÄØB. RAX)	Kleine, extrem schnelle Speicherpl√§tze	Datenverarbeitung in der CPU
Assembler-Befehl	Instruktion wie mov, add, jmp etc.	Steuert, was die CPU tut
Maschinencode	Bin√§rcode wie 0x48 89 c8	Was die CPU tats√§chlich ausf√ºhrt
C-Code	H√∂here Abstraktion, z.‚ÄØB. int a = 5;	Wird vom Compiler in Assembler √ºbersetzt

Wie wird C zu Maschinencode?

Beispiel:

int a = 5;

Wird von gcc oder clang kompiliert zu:

mov     eax, 5

Das wird dann zu Maschinencode (x86-64 Binary):

b8 05 00 00 00

Was bedeutet: ‚ÄûSchreibe 5 in das Register EAX (untere 32 Bit von RAX)‚Äú.
